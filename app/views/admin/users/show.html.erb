<% content_for(:title, t('.title')) %>
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <h1><%= t('.title') %></h1>
  <div class="text-right mb-3">
    <%= link_to t('defaults.edit'), edit_admin_user_path(@user), class: 'btn btn-success' %>
    <%= link_to t('defaults.delete'), admin_user_path(@user), method: :delete, data: { confirm: t('defaults.message.delete_confirm') }, class: 'btn btn-danger' %>
  </div>
  <table class="table table-bordered bg-white">
    <tr>
      <th scope="row"><%= User.human_attribute_name(:id) %></th>
      <td><%= @user.id %></td>
    </tr>
    <tr>
      <th scope="row"><%= User.human_attribute_name(:full_name) %></th>
      <td><%= @user.decorate.full_name %></td>
    </tr>
    <tr>
      <th scope="row"><%= User.human_attribute_name(:nickname) %></th>
      <td><%= @user.nickname %></td>
    </tr>
    <tr>
      <th scope="row"><%= User.human_attribute_name(:grade_and_class)%></th>
      <td><%= @user.grade_and_class %></td>
    </tr>
    <tr>
      <th scope="row"><%= '達成率の平均値'%></th>
      <td><%= @average_achievement_rate.present? ? number_to_percentage(@average_achievement_rate, precision: 0) : 'N/A' %>
    <tr>
    <tr>
      <th scope="row"><%= User.human_attribute_name(:introduction) %></th>
      <td><%= @user.introduction %></td>
    </tr>
    <tr>
      <th scope="row"><%= User.human_attribute_name(:created_at) %></th>
      <td><%= l @user.created_at, format: :long %></td>
    </tr>
  </table>
  <div class="w-100 align-self-end pt-1 pt-md-4 pb-4" style="max-width: 1000px;">
    <div class="row">
      <div class="col-md-6">
        <%= line_chart @test_results_data, xtitle: 'テスト名', ytitle: '達成率', height: '400px' %>
      </div>
      <div class="col-md-6">
        <%= scatter_chart @test_results_data2, xtitle: '学習時間（分）', ytitle: '点数', height: '400px' %>
      </div>
    </div>
  </div>
</main>
